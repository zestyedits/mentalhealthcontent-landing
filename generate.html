<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generate — MentalHealthContent.ai</title>
  <meta name="description" content="Generate client-friendly mental-health content using ethical, evidence-informed AI prompts.">

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg: #0b1022;
      --panel:#0e1436;
      --border:#1e2440;
      --text:#eef2ff;
      --muted:#c7d2fe;
      --accent:#8b5cf6;   /* violet */
      --accent2:#22d3ee;  /* cyan   */
      --shadow: 0 10px 30px rgba(17,24,39,.35);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      background: radial-gradient(1200px 800px at 50% -100px, rgba(139,92,246,.25), transparent 60%),
                  linear-gradient(135deg, #0b0f2a, #0a0f1f, #0b0f2a);
      background-size: 400% 400%;
      animation: bgShift 24s ease infinite;
    }
    @media (prefers-reduced-motion: reduce){ body{animation:none} }
    @keyframes bgShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

    a{color:inherit;text-decoration:none}

    /* Center the whole page in a wider frame for balance */
    .container{width:min(1200px, 92%); margin:0 auto}

    /* Header */
    header{position:sticky;top:0;z-index:50;backdrop-filter: blur(10px)}
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0;
    }
    .brand{display:flex;align-items:center;gap:.6rem;font-weight:800;letter-spacing:.2px}
    .brand svg{width:26px;height:26px;flex:0 0 auto}
    .menu{display:flex;gap:.6rem;align-items:center}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:.4rem;
      padding:.5rem .85rem;border-radius:12px;border:1px solid transparent;
      font-weight:600;line-height:1;cursor:pointer;transition:transform .15s ease, box-shadow .15s ease, border-color .2s ease;
      text-wrap:nowrap;
    }
    .btn:hover{transform:translateY(-2px)}
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#0a0f1f; box-shadow: 0 8px 22px rgba(167,139,250,.25), 0 4px 12px rgba(34,211,238,.18);
    }
    .btn.ghost{background:transparent;border-color:rgba(231,229,255,.1);color:var(--muted)}
    .btn.ghost:hover{border-color:rgba(231,229,255,.25)}

    .chip{
      display:inline-flex;align-items:center;gap:.45rem;
      font-size:.8rem;color:var(--muted);
      background:linear-gradient(180deg, rgba(139,92,246,.16), rgba(34,211,238,.08));
      padding:.35rem .6rem;border-radius:999px;border:1px solid rgba(231,229,255,.12)
    }
    .pill{
      background:rgba(34,211,238,.1);
      border:1px solid rgba(34,211,238,.3);
      color:#a5f3fc; padding:.35rem .55rem; border-radius:999px; font-weight:600; font-size:.8rem
    }
    .small{font-size:.92rem;color:var(--muted)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace}

    /* Hero */
    .hero{padding:26px 0 6px}
    .hero h1{font-size:clamp(1.8rem, 1.1rem + 2.8vw, 2.4rem);margin:.2rem 0 .55rem;line-height:1.12}
    .hero p{color:var(--muted);max-width:780px;margin:.25rem 0 0}

    /* Grid: left column ~400px, right fills; centered with even gap */
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:22px;
      margin:22px 0 36px;
      align-items:start;
    }
    @media (min-width: 980px){
      .grid{
        grid-template-columns: minmax(360px, 420px) minmax(0, 1fr);
        gap:24px;
      }
    }

    .panel, .card{
      background: linear-gradient(180deg, rgba(14,20,54,.82), rgba(11,16,40,.86));
      border:1px solid var(--border); border-radius:var(--radius); box-shadow: var(--shadow);
      padding:18px;
    }
    .panel h3, .card h3{margin:0 0 10px}

    label{display:block;font-weight:600;margin:6px 0 6px}
    input, select, textarea{
      width:100%; background: #0b1028; color:var(--text);
      border:1px solid var(--border); border-radius:12px; padding:.75rem .95rem;
      outline:none; transition:border-color .2s ease, box-shadow .2s ease; font-size:1rem;
    }
    input:focus, select:focus, textarea:focus{border-color:rgba(167,139,250,.55); box-shadow:0 0 0 3px rgba(167,139,250,.18)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row .col{flex:1 1 160px}

    .actions{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .right{margin-left:auto}

    /* Output block: limit measure, soft scroll, centered within card */
    .out-wrap{
      border:1px solid var(--border);
      border-radius:12px;
      background:#0b1028;
      padding:14px;
      max-height:55vh;
      overflow:auto;
    }
    pre{
      margin:0; white-space:pre-wrap; word-wrap:break-word;
      font-size:.95rem; line-height:1.55; max-width:70ch; /* readable width */
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    }

    .footer{
      color:var(--muted); border-top:1px solid var(--border); padding:18px 0; margin:30px 0 16px;
      text-align:center; font-size:.9rem
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container nav">
      <a class="brand" href="/" aria-label="MentalHealthContent.ai home">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <defs><linearGradient id="g" x1="0" y1="0" x2="24" y2="24"><stop stop-color="#8b5cf6"/><stop offset="1" stop-color="#22d3ee"/></linearGradient></defs>
          <path d="M12 21s-6-3.8-9-7.1C1 12 1 9.5 2.7 7.8 4.3 6.1 7 6 8.7 7.6l.8.8.8-.8C12 6 14.7 6.1 16.3 7.8 18 9.5 18 12 17 13.9 14 17.2 12 21 12 21z" fill="url(#g)"/>
        </svg>
        <span>MentalHealthContent.ai</span>
      </a>
      <nav class="menu" aria-label="Primary">
        <a class="btn ghost" href="/#examples">Examples</a>
        <a class="btn ghost" href="/#prompts">Free Prompts</a>
        <a class="btn ghost" href="/#pricing">Pricing</a>
        <a class="btn ghost" href="/#faq">FAQ</a>
        <a class="btn ghost" href="https://app.mentalhealthcontent.ai" rel="noopener">Sign in</a>
        <a class="btn primary" href="/#start">Start free</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <div class="row" style="align-items:center; gap:12px">
        <span class="chip">Beta</span>
        <a class="pill" href="/#prompts">Try 3 free prompts</a>
        <span class="small">No PHI • HIPAA-conscious workflows • Reading-level & tone controls</span>
      </div>
      <h1>Generate client-friendly content</h1>
      <p class="small">Start with a topic and format. You’ll get a clean, copy-ready draft (educational use only).</p>
    </div>
  </section>

  <!-- Main -->
  <main class="container grid">
    <!-- Left: form -->
    <section class="panel">
      <h3 style="margin-top:0">Your request</h3>
      <form id="genForm">
        <label for="topic">Topic</label>
        <input id="topic" name="topic" placeholder="5-4-3-2-1 grounding for teens" value="DBT Skills for Teens" />

        <div style="height:10px"></div>
        <div class="row">
          <div class="col">
            <label for="format">Format</label>
            <select id="format" name="format">
              <option value="carousel">Instagram carousel</option>
              <option value="worksheet" selected>Worksheet outline</option>
              <option value="video">60s video script</option>
              <option value="blog">Blog outline</option>
            </select>
          </div>
        </div>

        <div style="height:12px"></div>
        <div class="actions">
          <button class="btn primary" type="submit" id="go">Generate</button>
          <button class="btn ghost" type="button" id="sample">Use sample</button>
          <button class="btn ghost" type="button" id="copy" disabled>Copy output</button>
          <span class="small right mono" id="status"></span>
        </div>

        <div style="height:8px"></div>
        <p class="small mono">Trial mode — calls <code>POST /api/generate</code>.</p>
      </form>
    </section>

    <!-- Right: output -->
    <section class="card" aria-live="polite">
      <h3 style="margin-top:0">Output</h3>
      <div class="out-wrap">
        <pre id="out">Run a generation to see output…</pre>
      </div>
    </section>
  </main>

  <div class="container footer">
    Educational use only. Not for clinical diagnosis or crisis use. © 2025
  </div>

  <script>
    const form = document.getElementById('genForm');
    const topic = document.getElementById('topic');
    const format = document.getElementById('format');
    const out = document.getElementById('out');
    const statusEl = document.getElementById('status');
    const copyBtn = document.getElementById('copy');
    const sampleBtn = document.getElementById('sample');

    sampleBtn.addEventListener('click', () => {
      topic.value = "5-4-3-2-1 grounding for teens";
      format.value = "carousel";
      topic.focus();
    });

    copyBtn.addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(out.textContent || "");
        copyBtn.textContent = "Copied!";
        setTimeout(() => copyBtn.textContent = "Copy output", 1200);
      }catch(e){
        copyBtn.textContent = "Copy failed";
        setTimeout(() => copyBtn.textContent = "Copy output", 1200);
      }
    });

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = { topic: topic.value?.trim(), format: format.value };
      if(!payload.topic){
        topic.focus();
        return;
      }

      statusEl.textContent = "Generating…";
      out.textContent = "";
      copyBtn.disabled = true;

      try{
        const res = await fetch('/api/generate', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });

        if (!res.ok){
          const txt = await res.text();
          out.textContent = `Error ${res.status}: ${txt || 'Request failed'}`;
          return;
        }

        const data = await res.json();
        out.textContent = data.output || data.error || data.debug || 'No output';
      }catch(err){
        out.textContent = 'Fetch error: ' + err.message;
      }finally{
        statusEl.textContent = "";
        copyBtn.disabled = !out.textContent?.trim();
      }
    });
  </script>
</body>
</html>
